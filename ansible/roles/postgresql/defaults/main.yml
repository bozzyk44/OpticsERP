---
# Default variables for PostgreSQL role

# PostgreSQL 15 deployed via Docker
# Version is hardcoded to 15 for consistency

# PostgreSQL deployment paths
postgresql_base_dir: "/opt/postgresql"
postgresql_data_dir: "{{ postgresql_base_dir }}/data"
postgresql_config_dir: "/etc/postgresql"
postgresql_port: 5432
backup_path: "/var/backups"

# Timezone
timezone: "UTC"

# PostgreSQL configuration parameters
postgresql_listen_addresses: "*"
postgresql_max_connections: 200
postgresql_shared_buffers: "256MB"
postgresql_effective_cache_size: "1GB"
postgresql_work_mem: "16MB"
postgresql_maintenance_work_mem: "128MB"

# WAL settings for backup
postgresql_wal_level: "replica"
postgresql_max_wal_senders: 3
postgresql_wal_keep_size: "128MB"

postgresql_databases:
  - name: odoo_production
    encoding: UTF8
    lc_collate: en_US.utf8
    lc_ctype: en_US.utf8

postgresql_users:
  - name: odoo
    password: "{{ lookup('env', 'POSTGRES_PASSWORD') | default('changeme', true) }}"
    db: odoo_production
    priv: "ALL"
