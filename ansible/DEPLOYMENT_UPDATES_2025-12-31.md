# Deployment Updates - 2025-12-31

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

Ansible playbooks –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π WebSocket** –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

---

## ‚≠ê –ì–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: Master Deployment Playbook

### `deploy-production.yml` - –ù–û–í–´–ô –ú–ê–°–¢–ï–†-PLAYBOOK

**–ß—Ç–æ —ç—Ç–æ:**
- –ï–¥–∏–Ω—ã–π playbook –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è OpticsERP —Å –Ω—É–ª—è
- –ó–∞–º–µ–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö playbooks
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –í–°–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
ansible-playbook -i inventories/production/hosts.yml deploy-production.yml
```

**–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:**

### Phase 1: Server Preparation
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (firewall, SSH)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker

### Phase 2: Database & Cache
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PostgreSQL 15
- **‚ö†Ô∏è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –æ—Ç–∫–ª—é—á–∞–µ—Ç system Redis** (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Redis 7.2 —á–µ—Ä–µ–∑ Docker

### Phase 3: Nginx Reverse Proxy
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Nginx

### Phase 4: Odoo Application
- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç Odoo 17 —á–µ—Ä–µ–∑ Docker Compose
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### Phase 5: WebSocket Configuration ‚≠ê **–ö–†–ò–¢–ò–ß–ù–û!**
- –î–æ–±–∞–≤–ª—è–µ—Ç WebSocket map directive –≤ nginx.conf
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç WebSocket proxy locations (/websocket, /longpolling)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `websocket_url` –≤ odoo.conf
- **–£—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É "Connection Lost" errors**

### Phase 6: Custom Modules
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç optics_core
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç optics_pos_ru54fz
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç connector_b
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ru_accounting_extras

### Phase 7: Mock Services (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –í–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `--tags mock`

### Phase 8: Monitoring (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –í–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `--tags monitoring`

### FINAL: Verification
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é WebSocket

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Ansible Playbooks

#### ‚ú® –ù–û–í–´–ï:
- **`deploy-production.yml`** - Master deployment playbook (10KB)
- **`load-test-data.yml`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (6.5KB)
- **`test_data/sample_data.sql`** - SQL —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (12KB)
- **`test_data/README.md`** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (8KB)
- **`DEPLOYMENT_UPDATES_2025-12-31.md`** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

#### üìù –û–ë–ù–û–í–õ–ï–ù–´:
- **`site.yml`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è WebSocket configuration
- **`configure-odoo-websocket.yml`** - –ú–∞—Å—Ç–µ—Ä –¥–ª—è WebSocket (—É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª)

#### üóÑÔ∏è –ê–†–•–ò–í–ò–†–û–í–ê–ù–´:
–ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ `archived/`:
- `fix-nginx-websocket.yml` (v1, crashed)
- `fix-nginx-websocket-v2.yml` (partial fix)
- `fix-websocket-origin-header.yml`
- `fix-odoo-websocket-url.yml`
- `fix-websocket-port.yml`
- `restore-nginx-emergency.yml`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### üìù –û–ë–ù–û–í–õ–ï–ù–´:
- **`README.md`**
  - –î–æ–±–∞–≤–ª–µ–Ω Quick Start —Å `deploy-production.yml`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –æ WebSocket –≤ "–í–ê–ñ–ù–û"
  - –°—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- **`QUICKSTART.md`**
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è `deploy-production.yml`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã 8 —Ñ–∞–∑ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ WebSocket
  - WSL –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Windows

- **`PLAYBOOKS_INDEX.md`**
  - `deploy-production.yml` –Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ
  - –û–±–Ω–æ–≤–ª–µ–Ω Deployment Workflow
  - Legacy –º–µ—Ç–æ–¥ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ "NOT RECOMMENDED"

#### ‚ú® –ù–û–í–´–ï:
- **`WEBSOCKET_CONFIG_README.md`** (7.9KB) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WebSocket
- **`archived/README.md`** (5.4KB) - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ WebSocket fix

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
**–ë—ã–ª–æ:**
- 9 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö playbooks
- –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏
- –õ–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–°—Ç–∞–ª–æ:**
- 1 –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

### 2. WebSocket –∏–∑ –∫–æ—Ä–æ–±–∫–∏
**–ë—ã–ª–æ:**
- WebSocket –Ω—É–∂–Ω–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å
- "Connection Lost" –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–°—Ç–∞–ª–æ:**
- WebSocket –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Phase 5
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 3. Redis –∫–æ–Ω—Ñ–ª–∏–∫—Ç
**–ë—ã–ª–æ:**
- System Redis –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å Docker Redis
- –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫–ª—é—á–∞—Ç—å
- Odoo –º–æ–≥ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è

**–°—Ç–∞–ª–æ:**
- System Redis –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ Phase 2
- Docker Redis –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- –û–¥–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –º–µ–Ω—å—à–µ

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–ë—ã–ª–æ:**
- –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–°—Ç–∞–ª–æ:**
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WebSocket
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- Troubleshooting guide
- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (lessons learned)

### 5. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
**–ë—ã–ª–æ:**
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø—Ä–æ–¥—É–∫—Ç—ã
- –î–æ–ª–≥–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ dev/staging –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –ù–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ç–∞–ª–æ:**
- –ì–æ—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (20+ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, 5 –∫–ª–∏–µ–Ω—Ç–æ–≤)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ playbook
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: backup, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### ‚≠ê –ù–û–í–´–ô –ú–ï–¢–û–î (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
ansible-playbook -i inventories/production/hosts.yml deploy-production.yml
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
- ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ WebSocket –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ Redis –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—à–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

**–í—Ä–µ–º—è:** ~5-10 –º–∏–Ω—É—Ç

---

### ‚ö†Ô∏è LEGACY –ú–ï–¢–û–î (–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# 9+ –∫–æ–º–∞–Ω–¥
ansible-playbook site.yml --tags common,security
ansible-playbook site.yml --tags docker
ansible-playbook site.yml --tags postgresql
ansible-playbook disable-system-redis.yml
ansible-playbook site.yml --tags nginx
ansible-playbook deploy-odoo.yml
ansible-playbook configure-odoo-websocket.yml  # –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å!
ansible-playbook install-modules-cli.yml
ansible-playbook start-mock-services.yml  # optional
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ú–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥
- ‚ùå –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å WebSocket
- ‚ùå –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å Redis fix
- ‚ùå –ë–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤ –Ω–∞ –æ—à–∏–±–∫—É
- ‚ùå –î–æ–ª—å—à–µ

**–í—Ä–µ–º—è:** ~15-20 –º–∏–Ω—É—Ç + –±–æ–ª—å—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫

---

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å Legacy –Ω–∞ –ù–æ–≤—ã–π –ú–µ—Ç–æ–¥

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç Odoo –ë–ï–ó WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
ansible-playbook -i inventories/production/hosts.yml \
  configure-odoo-websocket.yml

# –ò–õ–ò —á–µ—Ä–µ–∑ site.yml
ansible-playbook -i inventories/production/hosts.yml \
  site.yml --tags websocket
```

### –î–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
ansible-playbook -i inventories/production/hosts.yml deploy-production.yml
```

---

## üìã Checklist –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx.conf map directive
grep -A 3 "map.*http_upgrade" /etc/nginx/nginx.conf
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: map $http_upgrade $connection_upgrade

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket location –≤ Nginx
grep -A 10 "location /websocket" /etc/nginx/sites-available/194.87.235.33.conf
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: proxy_pass, upgrade headers

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Odoo websocket_url
grep websocket_url /etc/opticserp/odoo.conf
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: websocket_url = ws://194.87.235.33/websocket

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç 8072
docker port opticserp_odoo | grep 8072
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 8072/tcp -> 127.0.0.1:8072
```

–í –±—Ä–∞—É–∑–µ—Ä–µ:
1. –û—Ç–∫—Ä—ã—Ç—å http://194.87.235.33
2. F12 ‚Üí Console: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "WebSocket connection established"
3. F12 ‚Üí Network ‚Üí WS: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ws://194.87.235.33/websocket —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 101
4. –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Connection Lost" –æ—à–∏–±–æ–∫

---

## üìö –ì–¥–µ –Ω–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- **`README.md`** - –ì–ª–∞–≤–Ω—ã–π README —Å Quick Start
- **`QUICKSTART.md`** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **`PLAYBOOKS_INDEX.md`** - –ü–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å –≤—Å–µ—Ö playbooks

### WebSocket –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`WEBSOCKET_CONFIG_README.md`** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ WebSocket
  - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
  - Deployment –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
  - Testing procedures
  - Troubleshooting guide
  - Rollback procedures

- **`archived/README.md`** - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ WebSocket fix
  - –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –ø–æ–ø—ã—Ç–æ–∫
  - –û—à–∏–±–∫–∏ –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã
  - Lessons learned
  - Anti-patterns

### –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`../CLAUDE.md`** - –ì–ª–∞–≤–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (¬ß1-13)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π:
1. ‚úÖ **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy-production.yml`
2. ‚úÖ –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `QUICKSTART.md`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ WebSocket –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
4. ‚úÖ –ß–∏—Ç–∞–π—Ç–µ `WEBSOCKET_CONFIG_README.md` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–∏–º–µ–Ω–∏—Ç–µ `configure-odoo-websocket.yml`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ "Connection Lost" –æ—à–∏–±–æ–∫
4. ‚úÖ –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö - —Å–º. Troubleshooting –≤ `WEBSOCKET_CONFIG_README.md`

### –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `site.yml` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
2. ‚úÖ –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ selective tags –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ
3. ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ WebSocket –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Nginx/Odoo

---

## ‚ö†Ô∏è Breaking Changes

**–ù–ï–¢ breaking changes!**

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- ‚úÖ `site.yml` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ (—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º WebSocket)
- ‚úÖ –°—Ç–∞—Ä—ã–µ playbooks –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã (–Ω–æ deprecated)
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- ‚ö†Ô∏è –ï—Å–ª–∏ —É –≤–∞—Å –ù–ï–¢ WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –µ—ë

---

## üèÜ –ò—Ç–æ–≥–∏

**–ß—Ç–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- ‚úÖ –ï–¥–∏–Ω—ã–π playbook –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WebSocket (—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ "Connection Lost")
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ Redis –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è dev/staging (20+ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, 5 –∫–ª–∏–µ–Ω—Ç–æ–≤, 5 —Ä–µ—Ü–µ–ø—Ç–æ–≤)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (backup, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- ‚úÖ Troubleshooting guides
- ‚úÖ Rollback procedures

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: —Å ~15-20 –º–∏–Ω—É—Ç ‚Üí ~5-10 –º–∏–Ω—É—Ç
- üêõ –û—à–∏–±–∫–∏: –º–µ–Ω—å—à–µ —à–∞–Ω—Å–æ–≤ —á—Ç–æ-—Ç–æ –∑–∞–±—ã—Ç—å
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ø–æ–ª–Ω–∞—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
- üîç –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –∏ –∑–∞—á–µ–º –¥–µ–ª–∞–µ—Ç—Å—è

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-31
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
